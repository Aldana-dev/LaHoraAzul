{% extends "base.html" %}
{% block title %}Tienda - La Hora Azul{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tienda.css') }}" />
{% endblock %}

{% block content %}
<section class="tienda">
  <!-- Category Filters -->
  <div class="filtros-categorias">
    {% set iconos = { 'Cuadros': 'cuadros.svg', 'Cerámica': 'ceramica.svg', 'Cuadernos': 'cuadernos.svg', 'Totebags': 'totebags.svg' } %}
    {% for cat in categorias %}
    <a href="{{ url_for('main.tienda', categoria_id=cat.id) }}" class="categoria {% if categoria_id == cat.id %}activa{% endif %}" title="Filtrar por categoría {{ cat.nombre }}" aria-current="{% if categoria_id == cat.id %}page{% endif %}">
      <img src="{{ url_for('static', filename='icon/' ~ iconos.get(cat.nombre, 'default.svg')) }}" alt="{{ cat.nombre }}" class="icono" loading="lazy" />
      <span>{{ cat.nombre }}</span>
    </a>
    {% endfor %}
  </div>

  <!-- Product List -->
  <div class="lista-productos">
    {% if productos %}
      {% for prod in productos %}
      <article class="producto" role="group">
        <a href="{{ url_for('main.producto', producto_id=prod.id) }}" title="{{ prod.nombre }}">
          <figure>
            <img src="{{ url_for('static', filename=prod.imagen) }}" alt="{{ prod.nombre }}" loading="lazy" />
            <figcaption>
              <p class="nombre-producto">{{ prod.nombre }}</p>
              <p class="precio-producto">$ {{ "%.2f"|format(prod.precio) }}</p>
            </figcaption>
          </figure>
        </a>
      </article>
      {% endfor %}
    {% else %}
      <p class="mensaje-vacio">No hay productos disponibles en este momento.</p>
    {% endif %}
  </div>
</section>
{% endblock %}