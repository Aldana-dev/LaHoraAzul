<!-- Base Template for La Hora Azul -->
<!DOCTYPE html>
<html lang="es">
  <head>
    <!-- Head Section: Metadata and External Resources -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}La Hora Azul{% endblock %}</title>

    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ url_for('static', filename='icon/ico.png') }}"
      type="image/png"
    />

    <!-- SEO Metadata -->
    <meta
      name="description"
      content="DescubrÃ­ artistas de todo el paÃ­s en La Hora Azul, nuestra tienda en Villa La Angostura, con arte, artesanÃ­as y marcos Ãºnicos para tu hogar."
    />

    <!-- Open Graph Metadata -->
    <meta property="og:title" content="La Hora Azul" />
    <meta
      property="og:description"
      content="DescubrÃ­ artistas de todo el paÃ­s en La Hora Azul, nuestra tienda en Villa La Angostura, con arte, artesanÃ­as y marcos Ãºnicos para tu hogar."
    />
    <meta
      property="og:image"
      content="{{ url_for('static', filename='icon/logo.png') }}"
    />
    <meta property="og:type" content="website" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Libre+Franklin:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />

    <!-- Frameworks and Libraries -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Custom Styles -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/estilos.css') }}"
    />

    {% block extra_css %}{% endblock %}
  </head>

  <body class="pagina">
    <!-- Header Section -->
    <header class="d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-3">
        <img
          src="{{ url_for('static', filename='icon/logo.png') }}"
          alt="Logo La Hora Azul"
          loading="lazy"
        />
      </div>
      <a
        href="{{ url_for('main.carrito') }}"
        class="d-flex align-items-center justify-content-center carrito-icono"
        aria-label="Ver carrito"
      >
        <i class="fa-solid fa-cart-shopping carrito-icono-i"></i>
        {% if session.get('carrito') and session.get('carrito')|length > 0 %}
        <span class="carrito-indicador"
          >{{ session.get('carrito')|length }}</span
        >
        {% endif %}
      </a>
    </header>

    <!-- Navigation Section -->
    <nav
      class="navegacion-sticky bg-white"
      role="navigation"
      aria-label="NavegaciÃ³n principal"
    >
      <a href="{{ url_for('main.index') }}">inicio</a>
      <a href="{{ url_for('main.nosotras') }}">nosotras</a>
      <a href="{{ url_for('main.tienda') }}">tienda</a>
      <a href="{{ url_for('main.marcos') }}">marcos</a>
    </nav>

    <!-- Main Content Section -->
    <main>{% block content %}{% endblock %}</main>

    <!-- Floating WhatsApp Button -->
    <a
      href="https://wa.me/5492944712263"
      class="btn-whatsapp ico-decorador"
      target="_blank"
      rel="noopener"
      aria-label="Contactar por WhatsApp"
    >
      <i class="fa-brands fa-whatsapp fa-2xl"></i>
    </a>

    <!-- Footer Section -->
    <footer>
      <div class="container footer-content d-flex justify-content-between">
        <p class="footer-left">
          Â© 2025 <span id="admin-trigger" class="oculto">La Hora Azul</span>.
          Todos los derechos reservados.
        </p>

        <p class="footer-right">Creado con ðŸ’™ por Aldana Ravalle.</p>
        <p>
          Una vez despachado el pedido, no nos hacemos responsables por
          eventuales roturas, pÃ©rdidas o demoras ocasionadas durante el envÃ­o.
          No se aceptan cambios ni devoluciones.
        </p>
      </div>
    </footer>

    <!-- Scripts Section -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const adminTrigger = document.getElementById("admin-trigger");
      if (adminTrigger) {
        adminTrigger.addEventListener("click", () => {
          window.location.href = "{{ url_for('admin.admin_login') }}";
        });
      }
    </script>

    <!-- Cart Button Handler -->
    <script>
      // Handle add to cart button
      const btnAgregar = document.getElementById("btn-agregar");
      if (btnAgregar) {
        btnAgregar.addEventListener("click", (e) => {
          e.preventDefault();

          // Deshabilitar el botÃ³n
          btnAgregar.disabled = true;
          btnAgregar.textContent = "Â¡En tu carrito!";
          btnAgregar.classList.add("deshabilitado");

          // Actualizar indicador del carrito
          actualizarIndicadorCarrito();

          // Enviar el formulario despuÃ©s de mostrar los cambios
          const form = btnAgregar.closest("form");
          if (form) {
            setTimeout(() => {
              form.submit();
            }, 300);
          }
        });
      }

      // FunciÃ³n para actualizar el indicador del carrito
      function actualizarIndicadorCarrito() {
        const carritoIconoLink = document.querySelector("a[href*='carrito']");
        let indicador = carritoIconoLink.querySelector(".carrito-indicador");

        if (!indicador) {
          indicador = document.createElement("span");
          indicador.className = "carrito-indicador";
          indicador.textContent = "1";
          carritoIconoLink.appendChild(indicador);
        } else {
          const cantidad = parseInt(indicador.textContent) + 1;
          indicador.textContent = cantidad;
        }
      }
    </script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
