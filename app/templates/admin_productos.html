<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Administrar Productos - La Hora Azul</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/estilos.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/admin.css') }}"
    />
  </head>
  <body class="pagina">
    <section class="admin-panel">
      <h2 class="titulo-admin">Administrar Productos</h2>
      <hr class="separador" />
      <p class="descripcion">
        Desde acá podés agregar productos nuevos a tu tienda, subir sus
        imágenes, establecer precios y también eliminar o editar los ya
        existentes.
      </p>

      <!-- Formulario dentro de tarjeta -->
      <div class="tarjeta form-producto">
        <h3>Agregar nuevo producto</h3>
        <form
          action="#"
          method="post"
          enctype="multipart/form-data"
          class="form-upload"
        >
          <input
            type="text"
            name="nombre"
            placeholder="Nombre del producto"
            required
          />
          <input type="number" name="precio" placeholder="Precio" required />
          <textarea
            name="descripcion"
            placeholder="Descripción"
            rows="3"
          ></textarea>

          <select name="categoria" id="categoria" required>
            <option value="" disabled selected>Seleccioná una categoría</option>
            <option value="cuadros">Cuadros</option>
            <option value="ceramica">Cerámica</option>
            <option value="cuadernos">Cuadernos</option>
            <option value="totebags">Totebags</option>
          </select>

          <input type="file" name="imagen" required />
          <button type="submit" class="btn boton">Agregar Producto</button>
        </form>
      </div>

      <!-- Productos actuales -->
      <h3 class="subtitulo">Productos actuales:</h3>
      <div class="galeria-preview-grid">
        <div class="galeria-grid">
          <!-- Repetir por producto -->
          <div class="galeria-item">
            <img
              src="{{ url_for('static', filename='ejemplo.jpg') }}"
              alt="Producto"
            />
            <p>Producto 1 - $1000</p>
            <div class="botones-producto">
              <button class="btn boton">Eliminar</button>
              <button class="btn boton edit-btn">Editar</button>
            </div>
          </div>
          <!-- Fin producto -->
        </div>
      </div>

      <!-- Botón volver -->
      <div class="text-center mt-5">
        <a href="{{ url_for('admin') }}" class="btn boton">Volver al Panel</a>
      </div>
    </section>

    <!-- Modal Editar Producto -->
    <div id="modal-editar" class="modal">
      <div class="modal-content">
        <span class="cerrar">&times;</span>
        <h3>Editar Producto</h3>
        <form
          id="form-editar-producto"
          action="#"
          method="post"
          enctype="multipart/form-data"
          class="form-upload"
        >
          <input
            type="text"
            name="nombre"
            placeholder="Nombre del producto"
            required
          />
          <input type="number" name="precio" placeholder="Precio" required />
          <textarea
            name="descripcion"
            placeholder="Descripción"
            rows="3"
          ></textarea>

          <!-- Nuevo campo categoría -->
          <label for="categoria-editar">Categoría:</label>
          <select name="categoria" id="categoria-editar" required>
            <option value="" disabled selected>Seleccioná una categoría</option>
            <option value="cuadros">Cuadros</option>
            <option value="ceramica">Cerámica</option>
            <option value="cuadernos">Cuadernos</option>
            <option value="totebags">Totebags</option>
          </select>

          <input type="file" name="imagen" />
          <button type="submit" class="btn boton">Guardar Cambios</button>
        </form>
      </div>
    </div>

    <script>
      // Obtener elementos
      const modal = document.getElementById("modal-editar");
      const btnsEditar = document.querySelectorAll(".btn.boton.edit-btn");
      const spanCerrar = modal.querySelector(".cerrar");

      btnsEditar.forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          modal.style.display = "block";
        });
      });

      spanCerrar.onclick = function () {
        modal.style.display = "none";
      };

      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };
    </script>
  </body>
</html>
